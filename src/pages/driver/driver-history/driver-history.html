<ion-header no-border>
  <ion-navbar>
    <ion-grid style="padding: 0px;">
      <ion-row>
        <ion-col style="padding: 0px;">
          <ion-title>
            <ion-label class="title">History Transaksi</ion-label>
          </ion-title>
        </ion-col>
        <ion-buttons end style="padding-right: 10px; padding-top: 5px;" (click)="presentPopover($event)">
          <button ion-button icon-only color="light">
            <ion-icon ios="ios-calendar" md="md-calendar"></ion-icon>
          </button>
        </ion-buttons>
      </ion-row>
    </ion-grid>
  </ion-navbar>

  <ion-card no-lines class="card-tops no-scroll" style="padding: 15px 8px 17px 8px; margin-bottom: 10px;" (click)="presentPopover($event)">
    <ion-row>
      <ion-col col-2 style="padding: 0px;">
        <span style="font-size: 3vw;">Tanggal :</span>
      </ion-col>
      <ion-col style="padding: 0px;">
        <span style="font-size: 3vw;">
          <ng-container *ngIf="chose=='1'; then tgl; else tgls"></ng-container>
          <ng-template #tgl><b>{{tgl_show}}</b></ng-template>
          <ng-template #tgls><b>{{tgl_show1}}</b> sampai <b>{{tgl_show2}}</b></ng-template>
        </span>
      </ion-col>
    </ion-row>
  </ion-card>

  <ion-row>
    <ng-container *ngIf="pfilterstatus==true; then filter; else nofilter"></ng-container>
    <ng-template #filter>
      <ion-col col-2 style="padding: 0px;">
        <ion-badge item-end style="border: 1px solid; margin: 0px 10px 10px 10px; padding: 10px; width: calc(100% - 20px); font-size: 3vw; color: red;" color="lightt" (click)="resetfilter()"><ion-icon ios="ios-close" md="md-close"></ion-icon></ion-badge>
      </ion-col>
      <ion-col style="padding: 0px;">
        <ion-badge item-end style="border: 1px solid; margin: 0px 10px 10px 0px; padding: 10px; width: calc(100% - 10px); font-size: 3vw; color: green;" color="lights" (click)="filterstatus(statusfilter)">{{statusfilter}} <ion-icon name="ios-arrow-down-outline" style="float: right;"></ion-icon></ion-badge>
      </ion-col>
    </ng-template>
    <ng-template #nofilter>
      <ion-col style="padding: 0px;">
        <ion-badge item-end style="border: 1px solid; margin: 0px 10px 10px 10px; padding: 10px; width: calc(100% - 20px); font-size: 3vw; color: black;" color="abu" (click)="filterstatus(statusfilter)">Semua Status<ion-icon name="ios-arrow-down-outline" style="float: right;"></ion-icon></ion-badge>
      </ion-col>
    </ng-template>
  </ion-row>

</ion-header>

<ion-content overflow-scroll="false">

	<ion-refresher (ionRefresh)="doRefresh($event)">
    <ion-refresher-content pullingIcon="arrow-dropdown" refreshingSpinner="circles"></ion-refresher-content>
  </ion-refresher>

	<ng-container *ngIf="paketss=='load'; then loads; else noloads"></ng-container>
    <ng-template #loads>
      <ion-list style="margin-left: 0px; height: 50px; text-align: center; vertical-align: middle;">
        <ion-spinner style="margin: auto;" name="dots"></ion-spinner>
      </ion-list>
    </ng-template>
    <ng-template #noloads>
      <ng-container *ngIf="paketss==''; then emptys; else noemptys"></ng-container>
      <ng-template #emptys>
        <img style="padding: 10px 10px; margin-top: 70px;" src="assets/not_available.svg" height="250" width="100%" />
        <ion-card-content style="text-align: center; color: #000;">
          Tidak ada Transaksi ditemukan..
        </ion-card-content>
      </ng-template>
      <ng-template #noemptys>

        <ion-card *ngFor="let paketa of paketss; let i = index;" class="card-mids" (click)="detaildriver(paketa)">
          <ion-row style="border-bottom: 1px solid #DEDEDE;">

            <ng-container *ngIf="paketa.customer_id=='QOB'; then ritel; else koorporat"></ng-container>
            <ng-template #ritel>
              <ion-col style="margin: 0px; padding: 0px; background-color: #FFDBDB;" ion-item>
                <img item-start style="width: 30px; margin: 0px 7px 0px 7px;" src="assets/icon/idritel.svg" />
                <span style="font-size: 3.2vw;">{{paketa.pickupid}}</span>
                <ion-badge item-end style="margin: 1%; padding: 5px; font-size: 10px;" color="lights">{{paketa.pickupstatusdesc}}</ion-badge>
              </ion-col>
            </ng-template>
            <ng-template #koorporat>
              <ion-col style="margin: 0px; padding: 0px; background-color: #DDDBFF;" ion-item>
                <img item-start style="width: 30px; margin: 0px 7px 0px 7px;" src="assets/icon/idcorporat.svg" />
                <span style="font-size: 3.2vw;"><b>{{paketa.pickupid}}</b></span>
                <ion-badge item-end style="margin: 1%; padding: 5px; font-size: 10px;" color="lights">{{paketa.pickupstatusdesc}}</ion-badge>
              </ion-col>
            </ng-template>

          </ion-row>
          <ion-row>
            <ion-col class="desc">
              <span><b>{{paketa.sendername}} - {{paketa.senderphone}}</b></span>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col col-11 class="desc">
              <span style="margin-left: ">{{paketa.senderaddress}}</span>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col col-6 style="padding-top: 15px; padding-left: 8px; font-size: 2.8vw">Total {{paketa.itemscount}} Paket </ion-col>
            <ion-col col-6 style="font-size: 5vw; padding-right: 8px;"><span style="float: right;">Rp. {{paketa.itemsmoneysum | number }}</span></ion-col>
          </ion-row>
        </ion-card>

      </ng-template>
    </ng-template>

</ion-content>
